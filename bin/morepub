#!/usr/bin/perl

use Mojo::Base -strict;
use FindBin '$Bin';
use lib "$Bin/../lib";
use App::morepub::Epub;

my $epub = shift;

my $book = App::morepub::Epub->new( file => $epub );

if ( -t STDOUT ) {

	open(my $fh, '|-', 'less')
		or die "Can't open less: $!\n";
    $book->render_book( $fh )
}
else {
    binmode( STDOUT, ":utf8" );
    $book->render_book( \*STDOUT );
}

exit 0;
